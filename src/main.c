/*******************************************************************************
  MPLAB Harmony Project Main Source File

  Company:
    Microchip Technology Inc.
  
  File Name:
    main.c

  Summary:
    This file contains the "main" function for an MPLAB Harmony project.

  Description:
    This file contains the "main" function for an MPLAB Harmony project.  The
    "main" function calls the "SYS_Initialize" function to initialize the state 
    machines of all MPLAB Harmony modules in the system and it calls the 
    "SYS_Tasks" function from within a system-wide "super" loop to maintain 
    their correct operation. These two functions are implemented in 
    configuration-specific files (usually "system_init.c" and "system_tasks.c")
    in a configuration-specific folder under the "src/system_config" folder 
    within this project's top-level folder.  An MPLAB Harmony project may have
    more than one configuration, each contained within it's own folder under
    the "system_config" folder.
 *******************************************************************************/

// DOM-IGNORE-BEGIN
/*******************************************************************************
Copyright (c) 2013-2014 released Microchip Technology Inc.  All rights reserved.

//Microchip licenses to you the right to use, modify, copy and distribute
Software only when embedded on a Microchip microcontroller or digital signal
controller that is integrated into your product or third party product
(pursuant to the sublicense terms in the accompanying license agreement).

You should refer to the license agreement accompanying this Software for
additional information regarding your rights and obligations.

SOFTWARE AND DOCUMENTATION ARE PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND,
EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION, ANY WARRANTY OF
MERCHANTABILITY, TITLE, NON-INFRINGEMENT AND FITNESS FOR A PARTICULAR PURPOSE.
IN NO EVENT SHALL MICROCHIP OR ITS LICENSORS BE LIABLE OR OBLIGATED UNDER
CONTRACT, NEGLIGENCE, STRICT LIABILITY, CONTRIBUTION, BREACH OF WARRANTY, OR
OTHER LEGAL EQUITABLE THEORY ANY DIRECT OR INDIRECT DAMAGES OR EXPENSES
INCLUDING BUT NOT LIMITED TO ANY INCIDENTAL, SPECIAL, INDIRECT, PUNITIVE OR
CONSEQUENTIAL DAMAGES, LOST PROFITS OR LOST DATA, COST OF PROCUREMENT OF
SUBSTITUTE GOODS, TECHNOLOGY, SERVICES, OR ANY CLAIMS BY THIRD PARTIES
(INCLUDING BUT NOT LIMITED TO ANY DEFENSE THEREOF), OR OTHER SIMILAR COSTS.
 *******************************************************************************/
// DOM-IGNORE-END


// *****************************************************************************
// *****************************************************************************
// Section: Included Files
// *****************************************************************************
// *****************************************************************************

#include <stddef.h>                     // Defines NULL
#include <stdbool.h>                    // Defines true
#include <stdlib.h>                     // Defines EXIT_FAILURE
#include <math.h>
#include "system/common/sys_module.h"   // SYS function prototypes
#include "GenericTypeDefs.h"

#define MAX_RS232	274		/* MAX=1+2*8*17+1 */
#define	HEX_02		0x02
#define	HEX_03		0x03


void Byte1ToByte2(unsigned char[], unsigned char[]);
unsigned char HexData[16] ={0x30, 0x31, 0x32, 0x33, 0x34, 0x35, 0x36, 0x37,
							0x38, 0x39, 0x61, 0x62, 0x63, 0x64, 0x65, 0x66};
#define MAX_LEN 3

int		Byte2ToByte1(BYTE*, BYTE*);	/* 2Byte To 1Byte */


/************************************************************************/
/*	PIC32MZ																*/
/************************************************************************/
/* START */
/* ????????? */
#define SEIGYO_00			0x00	/* ??? */
#define SEIGYO_10			0x10	/* ??????? */
#define SEIGYO_20			0x20	/* ?????(????) */
#define SEIGYO_90			0x90	/* ???????????? */
#define SEIGYO_A0			0xA0	/* ??????????(????) */
#define SEIGYO_80			0x80	/* ????????????? */

/* ?????????????? */
#define DOSA_MODE_00		0x00	/* ??? */
#define DOSA_MODE_40		0x40	/* MAIN-MON???? */

/* ????????/????????? */
#define JITURYU_DOWN_00		0x00	/* ??? */
#define JITURYU_UP_00		0x00	/* ??? */

/* STX/ETX */
#define	STX					0x02	/* STX */
#define	ETX					0x03	/* ETX */

/* BUFF MAX */
#define UART_MAX			50		/* UART DATA */
#define HD64570_MAX			30		/* HD64570 DATA */

/* ADRESS ???? */
#define LPR_00				0x00	/* ????????????LPR */

/* ADRESS ??????????? */
#define PABR0_02			0x02	/* ????????????0?PABR0 */
#define PABR1_03			0x03	/* ????????????1?PABR1 */
#define WCRL_04				0x04	/* ????????????????L?WCRL */
#define WCRM_05				0x05	/* ????????????????M?WCRM */
#define WCRH_06				0x06	/* ????????????????H?WCRH */

/* ADRESS DMAC???? */
#define PCR_08				0x08	/* DMA ????????????????????PCR* */
#define DMER_09				0x09	/* DMA ???????????????? DMER* */

/* ADRESS ????????? */
#define ISR0_10				0x10	/* ?????????????0?ISR0 */
#define ISR1_11				0x11	/* ?????????????1?ISR1 */
#define ISR2_12				0x12	/* ?????????????2?ISR2 */
#define IER0_14				0x14	/* ?????????0?IER0 */
#define IER1_15				0x15	/* ?????????1?IER1 */
#define IER2_16				0x16	/* ?????????2?IER2 */
#define ITCR_18				0x18	/* ???????????????ITCR */
#define IVR_1A				0x1A	/* ??????????????IVR */
#define IMVR_1C				0x1C	/* ?????????????????? IMVR */

/* ADRESS MSCI?????0? */
#define TRBL_20				0x20	/* MSCI TX?RX ?????????L ?????0?TRBL ????0 */
#define TRBH_21				0x21	/* MSCI TX?RX ?????????H ?????0?TRBH ????0 */
#define ST0_22				0x22	/* MSCI ??????????0 ?????0?ST0 ????0 */
#define ST1_23				0x23	/* MSCI ??????????1 ?????1?ST1 ????0 */
#define ST2_24				0x24	/* MSCI ??????????2 ?????0?ST2 ????0 */
#define ST3_25				0x25	/* MSCI ??????????3 ?????0?ST3 ????0 */
#define FST_26				0x26	/* MSCI ????????????????????0?FST ????0 */
#define IE0_28				0x28	/* MSCI ?????????0 ?????0?IE0 ????0 */
#define IE1_29				0x29	/* MSCI ?????????1 ?????0?IE1 ????0 */
#define IE2_2A				0x2A	/* MSCI ?????????2 ?????0?IE2 ????0 */
#define FIE_2B				0x2B	/* MSCI ??????????????????0?FIE ????0 */
#define CMD_2C				0x2C	/* MSCI ??????????????0?CMD ????0 */
#define MD0_2E				0x2E	/* MSCI ????????0 ?????0?MD0 ????0 */
#define MD1_2F				0x2F	/* MSCI ????????1 ?????0?MD1 ????0 */
#define MD2_30				0x30	/* MSCI ????????2 ?????0?MD2 ????0 */
#define CTL_31				0x31	/* MSCI ????????????????0?CTL ????0 */
#define SA0_32				0x32	/* MSCI ????????????0 ?????0?SA0 ????0 */
#define SA1_33				0x33	/* MSCI ????????????1 ?????0?SA1 ????0 */
#define IDL_34				0x34	/* MSCI ???????????????????0?IDL ????0 */
#define TMC_35				0x35	/* MSCI ????????????????????0?TMC ????0 */
#define RXS_36				0x36	/* MSCI?RX ??????????????????0?RXS ????0 */
#define TXS_37				0x37	/* MSCI?TX ??????????????????0?TXS ????0 */
#define TRC0_38				0x38	/* MSCI?TX ???????????????0 ?????0?TRC0 ????0 */
#define TRC1_39				0x39	/* MSCITX ???????????????1 ?????0?TRC1 ????0 */
#define RRC_3A				0x3A	/* MSCIRX ????????????????????0?RRC ????0 */
#define CST0_3C				0x3C	/* MSCI ???????????????0 ??????CST0 ????0 */
#define CST1_3D				0x3D	/* MSCI ???????????????1 ?????0?CST1 ????0 */

/* ADRESS MSCI?????1? */
#define TRBL_40				0x40	/* MSCI?TX?RX ?????????L ?????1?TRBL ????1 */
#define TRBH_41				0x41	/* MSCI?TX?RX ?????????H ?????1?TRBH ????1 */
#define ST0_42				0x42	/* MSCI ??????????0 ?????1 ?ST0 ????1 */
#define ST1_43				0x43	/* MSCI ??????????1 ?????1 ?ST1 ????1 */
#define ST2_44				0x44	/* MSCI ??????????2 ?????1 ?ST2 ????1 */
#define ST3_45				0x45	/* MSCI ??????????3 ?????1 ?ST3 ????1 */
#define FST_46				0x46	/* MSCI ????????????????????1?FST ????1 */
#define IE0_48				0x48	/* MSCI ?????????0 ?????1?IE0 ????1 */
#define IE1_49				0x49	/* MSCI ?????????1 ?????1?IE1 ????1 */
#define IE2_4A				0x4A	/* MSCI ?????????2 ?????1?IE2 ????1 */
#define FIE_4B				0x4B	/* MSCI ??????????????????1?FIE ????1 */
#define CMD_4C				0x4C	/* MSCI ??????????????1?CMD ????1 */
#define MD0_4E				0x4E	/* MSCI ????????0 ?????1?MD0 ????1 */
#define MD1_4F				0x4F	/* MSCI ????????1 ?????1?MD1 ????1 */
#define MD2_50				0x50	/* MSCI ????????2 ?????1?MD2 ????1 */
#define CTL_51				0x51	/* MSCI ????????????????1?CTL ????1 */
#define SA0_52				0x52	/* MSCI ????????????0 ?????1?SA0 ????1 */
#define SA1_53				0x53	/* MSCI ????????????1 ?????1?SA1 ????1 */
#define IDL_54				0x54	/* MSCI ???????????????????1?IDL ????1 */
#define TMC_55				0x55	/* MSCI ????????????????????1?TMC ????1 */
#define RXS_56				0x56	/* MSCIRX ??????????????????1?RXS ????1 */
#define TXS_57				0x57	/* MSCITX ??????????????????1?TXS ????1 */
#define TRC0_58				0x58	/* MSCITX ???????????????0 ?????1?TRC0 ????1 */
#define TRC1_59				0x59	/* MSCI?TX ???????????????1 ?????1?TRC1 ????1 */
#define RRC_5A				0x5A	/* MSCI?RX ????????????????????1?RRC ????1 */
#define CST0_5C				0x5C	/* MSCI ???????????????0 ?????1?CST0 ????1 */
#define CST1_5D				0x5D	/* MSCI ???????????????1 ?????1?CST1 ????1 */

/* ADRESS ????????0? */
#define TCNTL_60			0x60	/* ????????????L ?????0?TCNTL ????0 */
#define TCNTH_61			0x61	/* ????????????H ?????0?TCNTH ????0 */
#define TCONRL_62			0x62	/* ???????????????L ?????0?TCONRL ????0 */
#define TCONRH_63			0x63	/* ???????????????H ?????0?TCONRH ????0 */
#define TCSR_64				0x64	/* ??????????????????????????0?TCSR????0 */
#define TEPR_65				0x65	/* ???????????????????????????0?TEPR????0 */

/* ADRESS ????????1? */
#define TCNTL_68			0x68	/* ????????????L ?????1?TCNTL ????1 */
#define TCNTH_69			0x69	/* ????????????H ?????1?TCNTH ????1 */
#define TCONRL_6A			0x6A	/* ???????????????L ?????1?TCONRL ????1 */
#define TCONRH_6B			0x6B	/* ???????????????H ?????1?TCONRH ????1 */
#define TCSR_6C				0x6C	/* ??????????????????????????1?TCSR????1 */
#define TEPR_6D				0x6D	/* ???????????????????????????1?TEPR????1 */

/* ADRESS ????????2? */
#define TCNTL_70			0x70	/* ????????????L ?????2?TCNTL ????2 */
#define TCNTH_71			0x71	/* ????????????H ?????2?TCNTH ????2 */
#define TCONRL_72			0x72	/* ???????????????L ?????2?TCONRL ????2 */
#define TCONRH_73			0x73	/* ???????????????H ?????2?TCONRH ????2 */
#define TCSR_74				0x74	/* ??????????????????????????2?TCSR????2 */
#define TEPR_75				0x75	/* ???????????????????????????2?TEPR????2 */

/* ADRESS ????????3? */
#define TCNTL_78			0x78	/* ????????????L ?????3?TCNTL ????3 */
#define TCNTH_79			0x79	/* ????????????H ?????3?TCNTH ????3 */
#define TCONRL_7A			0x7A	/* ???????????????L?????3?TCONRL ????3 */
#define TCONRH_7B			0x7B	/* ???????????????H ?????3?TCONRH ????3 */
#define TCSR_7C				0x7C	/* ??????????????????????????3?TCSR????3 */
#define TEPR_7D				0x7D	/* ???????????????????????????3?TEPR????3 */

/* ADRESS DMAC?????0? */
#define BARL_80				0x80	/* ????????????????????L ????0(??????????????L ????0)?DARL ????0(BARL ????0) */
#define DARH_81				0x81	/* ????????????????????H ????0(??????????????H ????0)?DARH ????0(BARH ????0) */
#define DARB_82				0x82	/* ????????????????????B ????0(??????????????B ????0)?DARB ????0(BARB ????0) */
#define CPB_86				0x86	/* ??????????????????0?CPB ????0 */
#define CDAL_88				0x88	/* ??????????????????????L ????0?CDAL????0 */
#define CDAH_89				0x89	/* ??????????????????????H ????0?CDAH????0 */
#define EDAL_8A				0x8A	/* ?????????????????????L ????0?EDAL????0 */
#define EDAH_8B				0x8B	/* ?????????????????????H ????0?EDAH????0 */
#define BFLL_8C				0x8C	/* ???????L ????0?BFLL ????0 */
#define BFLH_8D				0x8D	/* ???????H ????0?BFLH ????0 */
#define BCRL_8E				0x8E	/* ?????????????L ????0?BCRL ????0 */
#define BCRH				0x8F	/* ?????????????H ????0?BCRH ????0 */
#define DSR_90				0x90	/* DMA ???????????????0?DSR ????0 */
#define DMR_91				0x91	/* DMA ?????????????0?DMR ????0 */
#define FCT_93				0x93	/* ??????????????????0?FCT ????0 */
#define DIR_94				0x94	/* DMA ??????????????0? DIR ????0 */
#define DCR_95				0x95	/* DMA ??????????????0? DCR ????0 */

/* ADRESS DMAC?????1? */
#define BARL_A0				0xA0	/* ??????????????L ????1?BARL ????1 */
#define BARH_A1				0xA1	/* ??????????????H ????1?BARH ????1 */
#define BARB_A2				0xA2	/* ??????????????B ????1?BARB ????1 */
#define SARL_A4				0xA4	/* ?????????????L ????1?SARL ????1 */
#define SARH_A5				0xA5	/* ?????????????H ????1?SARH ????1 */
#define SARB_A6				0xA6	/* ?????????????B ????1 (??????????????????1)?SARB ????1(CPB ????1) */
#define CDAL_A8				0xA8	/* ??????????????????????L ????1?CDAL????1 */
#define CDAH_A9				0xA9	/* ??????????????????????H ????1?CDAH????1 */
#define EDAL_AA				0xAA	/* ?????????????????????L ????1?EDAL????1 */
#define EDAH_AB				0xAB	/* ?????????????????????H ????1?EDAH????1 */
#define BCRL_AE				0xAE	/* ?????????????L ????1?BCRL ????1 */
#define BCRH_AF				0xAF	/* ?????????????H ????1?BCRH ????1 */
#define DSR_B0				0xB0	/* DMA ???????????????1?DSR ????1 */
#define DMR_B1				0xB1	/* DMA ?????????????1?DMR ????1 */
#define FCT_B3				0xB3	/* ??????????????????1?FCT ????1 */
#define DIR_B4				0xB4	/* DMA ??????????????1? DIR ????1 */
#define DCR_B5				0xB5	/* DMA ??????????????1? DCR ????1 */

/* ADRESS DMAC?????2? */
#define DARL_C0				0xC0	/* ????????????????????L ????2(??????????????L ????2)?DARL ????2(BARL ????2) */
#define DARH_C1				0xC1	/* ????????????????????H ????2(??????????????H ????2)?DARH ????2(BARH ????2) */
#define DARB_C2				0xC2	/* ????????????????????B ????2(??????????????B ????2)?DARB ????2(BARB ????2) */
#define CPB_C6				0xC6	/* ??????????????????2?CPB ????2 */
#define CDAL_C8				0xC8	/* ??????????????????????L ????2?CDAL????2 */
#define CDAH_C9				0xC9	/* ??????????????????????H ????2?CDAH????2 */
#define EDAL_CA				0xCA	/* ?????????????????????L ????2?EDAL????2 */
#define EDAH_CB				0xCB	/* ?????????????????????H ????2?EDAH????2 */
#define BFLL_CC				0xCC	/* ???????L ????2?BFLL ????2 */
#define BFLH_CD				0xCD	/* ???????H ????2?BFLH ????2 */
#define BCRL_CE				0xCE	/* ?????????????L ????2?BCRL ????2 */
#define BCRH_CF				0xCF	/* ?????????????H ????2?BCRH ????2 */
#define DSR_D0				0xD0	/* DMA ???????????????2?DSR ????2 */
#define DMR_D1				0xD1	/* DMA ?????????????2?DMR ????2 */
#define FCT_D3				0xD3	/* ??????????????????2?FCT ????2 */
#define DIR_D4				0xD4	/* DMA ??????????????2? DIR ????2 */
#define DCR_D5				0xD5	/* DMA ??????????????2? DCR ????2 */

/* ADRESS DMAC?????3? */
#define BARL_E0				0xE0	/* ??????????????L ????3?BARL ????3 */
#define BARH_E1				0xE1	/* ??????????????H ????3?BARH ????3 */
#define BARB_E2				0xE2	/* ??????????????B ????3?BARB ????3 */
#define SARL_E4				0xE4	/* ?????????????L ????3?SARL ????3 */
#define SARH_E5				0xE5	/* ?????????????H ????3?SARH ????3 */
#define SARB_E6				0xE6	/* ?????????????B ????3(??????????????????3)?SARB ????3(CPB ????3) */
#define CDAL_E8				0xE8	/* ??????????????????????L ????3?CDAL????3 */
#define CDAH_E9				0xE9	/* ??????????????????????H ????3?CDAH????3 */
#define EDAL_EA				0xEA	/* ?????????????????????L ????3?EDAL????3 */
#define EDAH_EB				0xEB	/* ?????????????????????H ????3?EDAH????3 */
#define BCRL_EE				0xEE	/* ?????????????L ????3?BCRL ????3 */
#define BCRH_EF				0xEF	/* ?????????????H ????3?BCRH ????3 */
#define DSR_F0				0xF0	/* DMA ???????????????3?DSR ????3 */
#define DMR_F1				0xF1	/* DMA ?????????????3?DMR ????3 */
#define FCT_F3				0xF3	/* ??????????????????3?FCT ????3 */
#define DIR_F4				0xF4	/* DMA ??????????????3? DIR ????3 */
#define DCR_F5				0xF5	/* DMA ??????????????3? DCR ????3 */



/*******************************************************************************
*  WORK SETTING
*******************************************************************************/
unsigned char uc_Uart_Recv_Data_A[UART_MAX];		/* UART RECV DATA A */
unsigned char uc_Uart_Recv_Data_B[UART_MAX];		/* UART RECV DATA B */
int i_Uart_Recv_Flg = 0;							/* UART RECV FLAG 0:Buff A, 1:Buff B */
int i_Uart_Recv_A_Cnt = 0;							/* UART RECV Buff A Count */
int i_Uart_Recv_B_Cnt = 0;							/* UART RECV Buff B Count */
unsigned char uc_Uart_Send_Data_A[UART_MAX];		/* UART SEND DATA A */
unsigned char uc_Uart_Send_Data_B[UART_MAX];		/* UART SEND DATA B */
int i_Uart_Send_Flg = 0;							/* UART SEND FLAG 0:Buff A, 1:Buff B */
int i_Uart_Send_A_Cnt = 0;							/* UART SEND Buff A Count */
int i_Uart_Send_B_Cnt = 0;							/* UART SEND Buff B Count */

unsigned char uc_Hd64570_Recv_Data_A[HD64570_MAX];	/* HD64570 RECV DATA A */
unsigned char uc_Hd64570_Recv_Data_B[HD64570_MAX];	/* HD64570 RECV DATA B */
int i_Hd64570_Recv_Flg = 0;							/* HD64570 RECV FLAG 0:Buff A, 1:Buff B */
unsigned char uc_Hd64570_Send_Data_A[HD64570_MAX];	/* HD64570 SEND DATA A */
unsigned char uc_Hd64570_Send_Data_B[HD64570_MAX];	/* HD64570 SEND DATA B */
int i_Hd64570_Send_Flg = 0;							/* HD64570 SEND FLAG 0:Buff A, 1:Buff B */


/*******************************************************************************
*  FUNCTION SETTING
*******************************************************************************/
/* INITIALIZE SEC */
void Initialize_Sec(void);			/* INITIALIZE */

/* RECV SEC */
void Uart_Recv_Sec(void);			/* UART RECV DATA */
void Uart_Send_Sec(void);			/* UART SEND DATA */



/*******************************************************************************
*  INITIALIZE
*******************************************************************************/
void Initialize_Sec(void){

	memset(uc_Uart_Recv_Data_A, 0x00, UART_MAX);		/* UART RECV DATA A */
	memset(uc_Uart_Recv_Data_B, 0x00, UART_MAX);		/* UART RECV DATA B */
	i_Uart_Recv_Flg = 0;								/* UART RECV FLAG 0:Buff A, 1:Buff B */
	memset(uc_Uart_Send_Data_A, 0x00, UART_MAX);		/* UART SEND DATA A */
	memset(uc_Uart_Send_Data_B, 0x00, UART_MAX);		/* UART SEND DATA B */
	i_Uart_Send_Flg = 0;								/* UART SEND FLAG 0:Buff A, 1:Buff B */

	memset(uc_Hd64570_Recv_Data_A, 0x00, HD64570_MAX);	/* HD64570 RECV DATA A */
	memset(uc_Hd64570_Recv_Data_B, 0x00, HD64570_MAX);	/* HD64570 RECV DATA B */
	i_Hd64570_Recv_Flg = 0;								/* HD64570 RECV FLAG 0:Buff A, 1:Buff B */
	memset(uc_Hd64570_Send_Data_A, 0x00, HD64570_MAX);	/* HD64570 SEND DATA A */
	memset(uc_Hd64570_Send_Data_B, 0x00, HD64570_MAX);	/* HD64570 SEND DATA B */
	i_Uart_Recv_A_Cnt = 0;								/* UART RECV Buff A Count */
	i_Uart_Recv_B_Cnt = 0;								/* UART RECV Buff B Count */
	i_Uart_Send_A_Cnt = 0;								/* UART SEND Buff A Count */
	i_Uart_Send_B_Cnt = 0;								/* UART SEND Buff B Count */
}

/*******************************************************************************
*  Uart Recv Data
*******************************************************************************/
void Uart_Recv_Data_Sec(void){

	int i;
	BYTE b_Data;

	/* DATA GET */
	if(b_Data != 0x00) {
		/* BUFF B */
		if(i_Uart_Recv_Flg) {
			if(i_Uart_Recv_B_Cnt > 0) {
				uc_Uart_Recv_Data_B[i_Uart_Recv_B_Cnt] = (unsigned char)b_Data;
				i_Uart_Recv_B_Cnt++;
				/* END */
				if(b_Data == ETX) i_Uart_Recv_Flg=0;
			} else {
				/* STX ?? */
				if(b_Data == STX) {
					uc_Uart_Recv_Data_B[i_Uart_Recv_B_Cnt] = (unsigned char)b_Data;
					i_Uart_Recv_B_Cnt++;
				}
			}
		} else {
			if(i_Uart_Recv_A_Cnt > 0) {
				uc_Uart_Recv_Data_A[i_Uart_Recv_A_Cnt] = (unsigned char)b_Data;
				i_Uart_Recv_A_Cnt++;
				/* END */
				if(b_Data == ETX) i_Uart_Recv_Flg=1;
			} else {
				/* STX ?? */
				if(b_Data == STX) {
					uc_Uart_Recv_Data_A[i_Uart_Recv_A_Cnt] = (unsigned char)b_Data;
					i_Uart_Recv_A_Cnt++;
				}
			}
		}
	}
}


/*******************************************************************************
*  Uart Send Data
*******************************************************************************/
void Uart_Send_Data_Sec(void){

	int i;
	BYTE b_Data;

	/* BUFF B */
	if(i_Uart_Send_Flg) {
		if(i_Uart_Send_B_Cnt > 0) {
			for(i=0; i<i_Uart_Send_B_Cnt; i++) {
				b_Data = (BYTE)uc_Uart_Send_Data_B[i];
				// UART GET
			}
		}
	} else {
		if(i_Uart_Send_A_Cnt > 0) {
			for(i=0; i<i_Uart_Send_A_Cnt; i++) {
				b_Data = (BYTE)uc_Uart_Send_Data_A[i];
				// UART GET
			}
		}
	}
}


/* END */
/************************************************************************/
/*	PIC32MZ																*/
/************************************************************************/

// *****************************************************************************
// *****************************************************************************
// Section: Main Entry Point
// *****************************************************************************
// *****************************************************************************

int main ( void )
{
    /* Initialize all MPLAB Harmony modules, including application(s). */
    SYS_Initialize ( NULL );
    Initialize_Sec();

    while ( true )
    {
        /* Maintain state machines of all polled MPLAB Harmony modules. */
        SYS_Tasks ( );

    }

    /* Execution should not come here during normal operation */

    return ( EXIT_FAILURE );
}


/*******************************************************************************
 End of File
*/

/************************************************
*  2Byte To 1Byte Data Function
************************************************/
int Byte2ToByte1(BYTE bin_data[], BYTE bout_data[])
{
	int i, n, j, flg;
	BYTE bdata;
	BYTE bdata1;
	BYTE bflg;

	i = n = flg = bflg = 0;

	while(1)
	{
		/* Loop End */
		if(i >= MAX_RS232) break;
		/* 0x03 Search */
		if(bin_data[i] == HEX_03) break;

		/* 0x02 Search */
		if(bin_data[i] == HEX_02) {
			flg=1;
		/* Data Set */
		} else if(flg) {
			bdata = 0;
			/* 0-9 */
			if(bin_data[i] >= 0x30 && bin_data[i] <= 0x39) {
				for(j=0; j<10; j++) if(bin_data[i] == 0x30+j) bdata=0x00+j;
			/* A-F a-f */
			} else if((bin_data[i] >= 0x41 && bin_data[i] <= 0x46) ||
					  (bin_data[i] >= 0x61 && bin_data[i] <= 0x66)) {
				for(j=1; j<7; j++) if(bin_data[i] == 0x40+j || bin_data[i] == 0x60+j) bdata=0x09+j;
			/* DATA ?? PASS */
			} else {
				bflg = 0;
				goto LOOP_END;
				/* END */
				return(1);
			}

			/* 4-7Bit */
			if(bflg==0) {
				bdata1 = bdata << 4;
				bdata1 &= 0xf0;
				bflg = 1;
			/* 0-3Bit */
			} else {
				bdata1 |= bdata;
				bout_data[n] = bdata1;		/* DATA SET */
				n++;
				bflg = 0;
			}
		}
LOOP_END:
		/* Point Up */
		i++;
	}


/*  TEST  */
//	unsigned char uc_Work[5];
	BYTE uc_Work[5];
	memset(uc_Work, 0x00, 5);
	uc_Work[1] = 0x66;
	uc_Work[0] = 0x66; j=0;
	for(i=0;i<strlen(uc_Work);i++){
		/* 0-9 */
		if(0x30 <= uc_Work[i] && 0x39 >= uc_Work[i])
			j+=(uc_Work[i] - 0x30) * (unsigned int)pow(16,i);
		/* a-f */
		if(0x61 <= uc_Work[i] && 0x66 >= uc_Work[i])
			j+=(uc_Work[i] - 0x61 + 0x0A) * (unsigned int)pow(16,i);
	}
/*  TEST  */
	
	/* END */
	return(0);
}

/*******************************************************************************
*  1BYTE TO 2BYTE
*******************************************************************************/
void Byte1ToByte2(unsigned char in_char[], unsigned char out_char[])
{
	int i, j;
	unsigned char uc_Wrk[5];

	j = 0;
	for(i=0; i<MAX_LEN; i++){
		memset(uc_Wrk, 0x00, 5);
		uc_Wrk[0] = in_char[i] & 0x0f;				/* 0-3Bit */
		uc_Wrk[1] = (in_char[i] & 0xf0) >> 4;		/* 4-7Bit */
		out_char[j] = 0x00;
		out_char[j] = HexData[(int)uc_Wrk[1]];
		j++;
		out_char[j] = 0x00;
		out_char[j] = HexData[(int)uc_Wrk[0]];
		j++;
	}
}
